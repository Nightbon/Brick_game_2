# BrickGame Змейка

## Описание проекта

Данный проект представляет собой реализацию классической игры «Змейка» на языке C++17 с использованием объектно-ориентированного программирования. Проект разделен на два независимых компонента: библиотеку с игровой логикой и графический пользовательский интерфейс. Важной частью проекта является поддержка старого кода тетриса на языке Си. Тетрис линкуется с новым интерфейсом на C++, а змейка со старым интерфейсом на Си.

## Содержание

- [BrickGame Змейка](#brickgame-змейка)
  - [Описание проекта](#описание-проекта)
  - [Содержание](#содержание)
  - [Особенности реализации](#особенности-реализации)
  - [Архитектура проекта](#архитектура-проекта)
    - [Диаграмма классов](#диаграмма-классов)
    - [Диаграмма конечного автомата](#диаграмма-конечного-автомата)
  - [Игровая логика](#игровая-логика)
    - [Механики игры](#механики-игры)
    - [Система очков и уровней](#система-очков-и-уровней)
    - [Управление](#управление)
  - [Компоненты системы](#компоненты-системы)
    - [Библиотека игровой логики](#библиотека-игровой-логики)
    - [Графический интерфейс](#графический-интерфейс)
    - [Консольный интерфейс](#консольный-интерфейс)
  - [Технические детали](#технические-детали)
    - [Требования к сборке](#требования-к-сборке)
    - [Сборка проекта](#сборка-проекта)
    - [Структура проекта](#структура-проекта)
  - [Тестирование](#тестирование)
  - [Документация](#документация)

## Особенности реализации

- **Чистая архитектура**: Реализация паттерна MVC с тонкими контроллерами и полным отделением бизнес-логики от представления
- **Конечный автомат**: Формализация игровой логики с использованием конечного автомата для надежного управления состояниями
- **Модульность**: Разделение на независимые компоненты, допускающие повторное использование
- **Кроссплатформенность**: Поддержка различных GUI-фреймворков и консольного интерфейса
- **Совместимость**: Полная поддержка игры «Тетрис» из предыдущей версии проекта

## Архитектура проекта


## Игровая логика

### Механики игры

- **Игровое поле**: Размером 10×20 клеток («пикселей»)
- **Змейка**: Начальная длина — 4 клетки, движется непрерывно вперед
- **Яблоки**: Появляются на свободных клетках поля в случайных позициях
- **Рост**: При съедании яблока длина змейки увеличивается на 1 клетку
- **Условия поражения**: Столкновение с границей поля или с собственным телом
- **Условие победы**: Достижение длины 200 клеток
- **Ускорение**: Возможность временного увеличения скорости движения

### Система очков и уровней

- **Начисление очков**: +1 очко за каждое съеденное яблоко
- **Повышение уровня**: Каждые 5 очков увеличивают уровень на 1
- **Максимальный уровень**: 10
- **Скорость**: Увеличивается с каждым уровнем
- **Рекорд**: Автоматическое сохранение и загрузка максимального счета

### Управление

| Клавиша | Действие |
|---------|----------|
| ← → ↑ ↓ | Изменение направления движения змейки |
| Пробел / Action | Ускорение движения |
| P / Pause | Пауза / Продолжение игры |
| Enter / Start | Начало / Перезапуск игры |
| Esc / Terminate | Завершение игры |

## Компоненты системы

### Библиотека игровой логики

Библиотека, реализующая бизнес-логику игры, расположена в `src/brick_game/snake/`:
- **Модель игры**: Класс `SnakeGame` — центральный компонент, управляющий состоянием игры
- **Состояния**: Иерархия классов-состояний (`IdleState`, `PlayingState`, `PausedState`, `GameOverState`)
- **Игровые объекты**: Классы `Snake`, `Apple`, `Field`, `Point`
- **Конечный автомат**: Формальная модель переходов между состояниями
- **API**: C-совместимый интерфейс для взаимодействия с внешними представлениями

### Графический интерфейс

Десктопное GUI-приложение на базе Qt/GTK+, расположенное в `src/gui/desktop/`:
- **Визуализация игрового поля**: Отображение текущего состояния игры
- **Боковая панель**: Вывод счета, рекорда, уровня, скорости
- **Обработка событий**: Перехват и трансляция пользовательского ввода
- **Адаптер для Тетриса**: Полная поддержка игры «Тетрис» из BrickGame v1.0

### Консольный интерфейс

Терминальное представление, перенесенное из BrickGame v1.0:
- **Поддержка змейки**: Полная интеграция новой игры в существующий интерфейс
- **Терминальная графика**: Отображение игрового процесса в консоли
- **Клавиатурный ввод**: Обработка нажатий клавиш в терминале

## Технические детали

### Требования к сборке

- Компилятор с поддержкой C++17 (GCC, Clang, MSVC)
- CMake 3.10 или выше / Make
- Qt 5/6 или GTK+ 3/4 (для графического интерфейса)
- Google Test (для модульного тестирования)
- Doxygen (для генерации документации)

### Сборка проекта

```bash
# Клонирование репозитория
git clone <repository-url>
cd brickgame

# Сборка проекта
make all

# Установка в указанный каталог
make install DESTDIR=/path/to/install

# Удаление
make uninstall

# Очистка временных файлов
make clean

# Генерация документации
make dvi

# Создание дистрибутива
make dist

# Запуск тестов
make test
